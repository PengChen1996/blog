<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Peng</title>
    <link rel="stylesheet" href="css/font/css/font-awesome.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="wangEditor/css/wangEditor.css">
    <script src="js/jquery_2.1.4.js" type="text/javascript"></script>
</head>
<body>
    <div class="container">
        <!--左边-->
        <div class="left-box">
            <!--head-->
            <div class="head">
                <img src="img/exa.jpg" alt="jpg">
                <div class="title">
                    <a>FlyingWWS</a>
                </div>
            </div>
            <!--body-->
            <div class="body">
                <a href="" class="active">Java</a>
                <a href="">JavaWeb</a>
                <a href="">Php</a>
                <a href="">Html</a>
                <a href="">JavaScript</a>
            </div>
        </div>
        <!--中间-->
        <div class="mid-box">
            <div class="head">
                <a>My Blog</a>
            </div>
            <div class="body">
                <div class="item">
                    <div class="date">
                        <div class="year">
                            <p>2016</p>
                            <p>十一</p>
                        </div>
                        <div class="month">
                            <p>19</p>
                        </div>
                    </div>
                    <div class="blog">
                        <div class="blog_title">
                            <a href="#">微信公众号用百度车联网API回复天气预报</a>
                            <div class="blog_record">
                                <span><i class="fa fa-eye"></i>&nbsp;(100)&nbsp;</span>&nbsp;
                                <span><i class="fa fa-comment-o"></i>&nbsp;(100)&nbsp;</span>
                            </div>
                        </div>
                        <div class="content" style="height:auto;">
                            <div >
                                <p>
                                1.申请百度地图开发平台访问应用（AK）; 点创建应用 然后提交，AK就申请好了；
                                2.然后我们看下百度的车联网API中的天气查询，这是链接车联网API 这是API上面的接口实例
                                http://api.map.baidu.com/telematics/v3/weather?location=北京&output=json&ak=E4805d16520de693a3fe707cdc9620
                                1.申请百度地图开发平台访问应用（AK）; 点创建应用 然后提交，AK就申请好了；
                                2.然后我们看下百度的车联网API中的天气查询，这是链接车联网API 这是API上面的接口实例
                                http://api.map.baidu.com/telematics/v3/weather?location=北京&output=json&ak=E4805d16520de693a3fe707cdc9620
                                </p>
                            </div>
                        </div>
                        <div class="blog_foot">
                            <a>转载请附上链接,O(∩_∩)O谢谢!</a>
                            <div class="blog_like">
                                <i class="fa fa-smile-o"></i>&nbsp;<span>100</span>&nbsp;&nbsp;
                                <i class="fa fa-frown-o"></i>&nbsp;<span>100</span>&nbsp;&nbsp;
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="item">
                    <div class="date">
                        <div class="year">
                            <p>2016</p>
                            <p>十一</p>
                        </div>
                        <div class="month">
                            <p>19</p>
                        </div>
                    </div>
                    <div class="blog">
                        <div class="title">
                            <a href="#">微信公众号用百度车联网API回复天气预报</a>
                        </div>
                        <div class="content">
                            <p>1.申请百度地图开发平台访问应用（AK）; 点创建应用 然后提交，AK就申请好了；
                                2.然后我们看下百度的车联网API中的天气查询，这是链接车联网API 这是API上面的接口实例
                                http://api.map.baidu.com/telematics/v3/weather?location=北京&output=json&ak=E4805d16520de693a3fe707cdc9620
                                1.申请百度地图开发平台访问应用（AK）; 点创建应用 然后提交，AK就申请好了；
                                2.然后我们看下百度的车联网API中的天气查询，这是链接车联网API 这是API上面的接口实例
                                http://api.map.baidu.com/telematics/v3/weather?location=北京&output=json&ak=E4805d16520de693a3fe707cdc9620
                            </p>
                        </div>
                        <div class="foot">
                            <div class="tool">
                                <span>111</span>
                                <span>222</span>
                            </div>
                            <div class="original">
                                <a href="#">继续阅读&nbsp;&nbsp;</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="spiltpage">
                    <i class="fa fa-chevron-left" title="上一页" onclick=blog('+precount+','+pagesize+')></i>
                    &nbsp;<i>1/</i><i>2</i>&nbsp;
                    <i class="fa fa-chevron-right" title="下一页" onclick=blog('+nextcount+','+pagesize+')></i>
                </div> -->
                
            </div>
        </div>
        <!--右边-->
        <div class="right-box">
            <div class="head">
                <ul>
                    <li><a href=""><i class="fa fa-bars"></i></a></li>
                    <li><a href="/myblog/html/video.html" title="视频" target="_blank"><i class="fa fa-video-camera"></i></a></li>
                    <li><a href="/myblog/html/chat.html" target="_blank" title="聊天室"><i class="fa fa-comments"></i></a></li>
                    <li><a href="https://github.com/FlyingWWS/myblog/" title="github" target="_blank"><i class="fa fa-github"></i></a></li>
                    <li><a href="tencent://message/?uin=321566430&Site=qq&Menu=yes" title="与我交谈"><i class="fa fa-qq"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
</body>
    <script type="text/javascript">
        window.onload = function(){
            blog(0,5);
            visitor();
        }
        function blog(startcount,pagesize){
            var data = {
                startcount:startcount,
                pagesize:pagesize
            }
            $.ajax({
                url:"/myblog/php/uri.php/blog/blog/select",
                type:"post",
                data:data,
                dataType:"json",
                success:function(data){
                    // alert(data.count);
                    var content = "";   
                    $.each(data.blog,function(index,item){
                        content =  '<div class="item">'+
                                            '<div class="date">'+
                                                '<div class="year">'+
                                                    '<p>'+item['year']+'</p>'+
                                                    '<p>'+item['month']+'</p>'+
                                                '</div>'+
                                                '<div class="month">'+
                                                    '<p>'+item['day']+'</p>'+
                                                '</div>'+
                                            '</div>'+
                                            '<div class="blog">'+
                                                '<div class="title">'+
                                                    '<a href="#" onclick="blog_one('+item['id']+')">'+item['title']+'</a>'+
                                                '</div>'+
                                                '<div class="content">'+
                                                    '<p>'+item['content']+'</p>'+
                                                '</div>'+
                                                '<div class="foot">'+
                                                    '<div class="tool">'+
                                                        '<i class="fa fa-eye"></i><span>(100)</span>&nbsp;'+
                                                        '<i class="fa fa-comment-o"></i><span>(100)</span>&nbsp;'+
                                                    '</div>'+
                                                    '<div class="original">'+
                                                        '<a onclick="blog_one('+item['id']+')">继续阅读&nbsp;&nbsp;</a>'+
                                                    '</div>'+
                                                '</div>'+
                                            '</div>'+
                                        '</div>'+content;   //注意这里加了content;
                    });
                    $(".mid-box .body").html(content);
                    var current = (startcount/pagesize)+1;
                    var total = parseInt(data.count/pagesize)+((data.count%pagesize)>0?1:0);
                    var precount = (startcount-pagesize)<0 ? 0:(startcount-pagesize);
                    console.log("precount:"+precount);
                    var nextcount = (startcount+pagesize)>=data.count?startcount:(startcount+pagesize);
                    console.log("nextcount:"+nextcount);
                    var spiltpage = '<div class="spiltpage">'+
                                        '<i class="fa fa-chevron-left" title="上一页" onclick=blog('+precount+','+pagesize+')></i>'+
                                        '&nbsp;<i>'+current+'/</i><i>'+total+'</i>&nbsp;'+
                                        '<i class="fa fa-chevron-right" title="下一页" onclick=blog('+nextcount+','+pagesize+')></i>'+
                                    '</div>';
                    $(".mid-box .body").append(spiltpage);
                    console.log("success");
                },
                error:function(){
                    console.log("error");
                }
            });
        }

        function blog_one(id){
            var data = {
                id:id
            }
            $.ajax({
                url:"/myblog/php/uri.php/blog/blog/select_one",
                type:"post",
                dataType:"json",
                data:data,
                success:function(data){
                    var blogone = '<div class="item">'+
                                        '<div class="date">'+
                                            '<div class="year">'+
                                                '<p>'+data[id]['year']+'</p>'+
                                                '<p>'+data[id]['month']+'</p>'+
                                            '</div>'+
                                            '<div class="month">'+
                                                '<p>'+data[id]['day']+'</p>'+
                                            '</div>'+
                                        '</div>'+
                                        '<div class="blog">'+
                                            '<div class="blog_title">'+
                                                '<a href="#">'+data[id]['title']+'</a>'+
                                                '<div class="blog_record">'+
                                                    '<span><i class="fa fa-eye"></i>&nbsp;(100)&nbsp;</span>&nbsp;'+
                                                    '<span><i class="fa fa-comment-o"></i>&nbsp;(100)&nbsp;</span>'+
                                                '</div>'+
                                            '</div>'+
                                            '<div class="content" style="height:auto;">'+
                                                '<p>'+data[id]['content']+'</p>'+
                                            '</div>'+
                                            '<div class="blog_foot">'+
                                                '<a>转载请附上链接,O(∩_∩)O谢谢!</a>'+
                                                '<div class="blog_like">'+
                                                    '<i class="fa fa-smile-o"></i>&nbsp;<span>100</span>&nbsp;&nbsp;'+
                                                    '<i class="fa fa-frown-o"></i>&nbsp;<span>100</span>&nbsp;&nbsp;'+
                                                '</div>'+
                                            '</div>'+
                                        '</div>'+
                                    '</div>';
                     $(".mid-box .body").html(blogone);
                    console.log(data);
                },
                error:function(){
                    console.log("error");
                }
            });
        }
    </script>
    <script type="text/javascript">
        function visitor(){
            $.ajax({
                url:"http://ip.chinaz.com/getip.aspx",
                type:"post",
                dataType:"jsonp",
                success:function(result){
                    $.post('/myblog/php/controller/visitor.php',
                        {ip: result.ip, address: result.address},
                        function (msg){
                            console.log("vi success");
                        }
                    );
                },error:function(){
                    console.log("vi_two.php");
                    $.post('/myblog/php/controller/visitor_two.php',
                        function (msg){
                            console.log(msg);
                        }
                    );
                }
            });
        }
    </script>
</html>